<!--pages/dj-upload/dj-upload.wxml-->
<view class="container">
  <view class="form-section">
    <view class="form-title">ä¸Šä¼ DJèµ„æ–™</view>

    <!-- DJç…§ç‰‡ -->
    <view class="form-item">
      <text class="label">DJç…§ç‰‡ *</text>
      <view class="image-upload" bindtap="chooseImage">
        <image wx:if="{{localImagePath}}" src="{{localImagePath}}" mode="aspectFill" class="preview-image" />
        <view wx:else class="upload-placeholder">
          <text class="upload-icon">ğŸ“·</text>
          <text class="upload-text">ç‚¹å‡»é€‰æ‹©ç…§ç‰‡</text>
        </view>
      </view>
    </view>

    <!-- DJåç§° -->
    <view class="form-item">
      <text class="label">DJåç§° *</text>
      <input
        class="input"
        placeholder="è¯·è¾“å…¥DJåç§°"
        value="{{name}}"
        bindinput="onNameInput"
      />
    </view>

    <!-- åŸå¸‚é€‰æ‹© - ä½¿ç”¨å¾®ä¿¡ region ç»„ä»¶ -->
    <view class="form-item">
      <text class="label">åŸå¸‚ *</text>
      <picker
        mode="region"
        bindchange="onCityChange"
        value="{{cityRegion}}"
        custom-item="{{customCityItem}}"
      >
        <view class="picker">
          {{city || 'è¯·é€‰æ‹©åŸå¸‚'}}
        </view>
      </picker>
    </view>

    <!-- å‚ç‰Œé€‰æ‹© - å¯é€‰æ‹©ç°æœ‰æˆ–è‡ªå®šä¹‰ -->
    <view class="form-item">
      <text class="label">å‚ç‰Œ</text>
      <picker
        bindchange="onLabelChange"
        value="{{labelIndex}}"
        range="{{labelOptions}}"
      >
        <view class="picker">
          {{label || 'è¯·é€‰æ‹©å‚ç‰Œï¼ˆé€‰å¡«ï¼‰'}}
        </view>
      </picker>
    </view>

    <!-- è‡ªå®šä¹‰å‚ç‰Œè¾“å…¥æ¡†ï¼ˆå½“é€‰æ‹©"è‡ªå®šä¹‰"æ—¶æ˜¾ç¤ºï¼‰ -->
    <view class="form-item" wx:if="{{showCustomLabel}}">
      <text class="label">è‡ªå®šä¹‰å‚ç‰Œ</text>
      <input
        class="input"
        placeholder="è¯·è¾“å…¥å‚ç‰Œåç§°"
        value="{{customLabel}}"
        bindinput="onCustomLabelInput"
      />
    </view>

    <!-- éŸ³ä¹é£æ ¼é€‰æ‹© - å¤šé€‰æ ‡ç­¾ -->
    <view class="form-item">
      <text class="label">éŸ³ä¹é£æ ¼</text>
      <view class="tag-selector">
        <view
          class="tag-item {{selectedStyles.indexOf(item.name) > -1 ? 'selected' : ''}}"
          wx:for="{{styleTagOptions}}"
          wx:key="id"
          bindtap="onStyleTagTap"
          data-name="{{item.name}}"
        >
          {{item.name}}
          <text style="font-size: 20rpx; color: red;">[{{selectedStyles.indexOf(item.name)}}]</text>
        </view>
      </view>
      <view class="hint-text">æœ€å¤šé€‰æ‹© 5 ä¸ªæ ‡ç­¾</view>
      <!-- è°ƒè¯•ä¿¡æ¯ -->
      <view class="hint-text" style="color: red; margin-top: 10rpx;">
        è°ƒè¯•: å·²é€‰æ‹© {{selectedStyles.length}} ä¸ªæ ‡ç­¾: {{selectedStyles}}
      </view>
      <view class="hint-text" style="color: blue; margin-top: 5rpx;">
        ç¬¬ä¸€ä¸ªæ ‡ç­¾æ•°æ®: {{styleTagOptions[0]}}
      </view>
    </view>

    <!-- æäº¤æŒ‰é’® -->
    <button
      class="submit-btn"
      bindtap="handleSubmit"
      disabled="{{uploading}}"
    >
      {{uploading ? 'ä¸Šä¼ ä¸­...' : 'æäº¤'}}
    </button>
  </view>
</view>
