<!--pages/settings/settings.wxml-->
<view class="container">
  <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
  <view class="user-section">
    <view wx:if="{{isLoggedIn}}" class="user-info">
      <image
        src="{{userInfo.avatar_url || '/images/default-avatar.png'}}"
        class="avatar"
        mode="aspectFill"
      />
      <view class="user-details">
        <text class="nickname">{{userInfo.nickname}}</text>
        <view class="stats">
          <text class="stat-item">{{reviewCount}} {{texts.reviewCount}}</text>
          <text class="separator">Â·</text>
          <text class="stat-item">{{favoriteCount}} {{texts.favoriteCount}}</text>
        </view>
      </view>
    </view>

    <view wx:else class="login-prompt">
      <image src="/images/default-avatar.png" class="avatar" mode="aspectFill" />
      <button class="login-btn" bindtap="handleLogin">{{texts.login}}</button>
    </view>
  </view>

  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <!-- æˆ‘çš„è¯„è®º -->
    <view class="menu-item" bindtap="goToMyReviews">
      <text class="menu-icon">âœï¸</text>
      <text class="menu-label">{{texts.myReviews}}</text>
      <text class="menu-arrow">â€º</text>
    </view>

    <!-- æˆ‘çš„æ”¶è— -->
    <view class="menu-item" bindtap="goToMyFavorites">
      <text class="menu-icon">â­</text>
      <text class="menu-label">{{texts.myFavorites}}</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- è®¾ç½®èœå• -->
  <view class="menu-section">
    <!-- è¯­è¨€è®¾ç½® -->
    <view class="menu-item" bindtap="switchLanguage">
      <text class="menu-icon">ğŸŒ</text>
      <text class="menu-label">{{texts.language}}</text>
      <text class="menu-value">{{currentLanguage === 'zh-CN' ? texts.chinese : texts.english}}</text>
      <text class="menu-arrow">â€º</text>
    </view>

    <!-- æ¸…é™¤ç¼“å­˜ -->
    <view class="menu-item" bindtap="clearCache">
      <text class="menu-icon">ğŸ—‘ï¸</text>
      <text class="menu-label">{{texts.clearCache}}</text>
      <text class="menu-arrow">â€º</text>
    </view>

    <!-- å…³äº -->
    <view class="menu-item" bindtap="showAbout">
      <text class="menu-icon">â„¹ï¸</text>
      <text class="menu-label">{{texts.about}}</text>
      <text class="menu-value">v1.0.0</text>
      <text class="menu-arrow">â€º</text>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view wx:if="{{isLoggedIn}}" class="logout-section">
    <button class="logout-btn" bindtap="handleLogout">{{texts.logout}}</button>
  </view>
</view>
